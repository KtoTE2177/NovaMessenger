<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexio Messenger</title>
    <link rel="stylesheet" href="style.css" onerror="this.href='data:text/css;base64,' + btoa('body{background:red!important}')">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí¨</text></svg>">
</head>
<body class="light-theme">
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="auth-container">
        <div class="auth-form">
            <div class="app-logo">
                <span class="logo-icon">üí¨</span>
                <h1>Nova</h1>
            </div>
            
            <div id="login-form">
                <div class="input-group">
                    <input type="text" id="login-username" placeholder=" " required>
                    <label for="login-username">–õ–æ–≥–∏–Ω</label>
                </div>
                
                <div class="input-group">
                    <input type="password" id="login-password" placeholder=" " required>
                    <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
                </div>
                
                <button class="auth-button" onclick="login()">
                    <span class="button-icon">üöÄ</span>
                    –í–æ–π—Ç–∏
                </button>
                
                <p class="auth-switch">
                    –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                </p>
            </div>

            <div id="register-form" style="display: none;">
                <div class="input-group">
                    <input type="text" id="register-username" placeholder=" " required>
                    <label for="register-username">–õ–æ–≥–∏–Ω</label>
                </div>
                
                <div class="input-group">
                    <input type="password" id="register-password" placeholder=" " required>
                    <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
                </div>
                
                <button class="auth-button" onclick="register()">
                    <span class="button-icon">üåü</span>
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
                
                <p class="auth-switch">
                    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showLogin()">–í–æ–π—Ç–∏</a>
                </p>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app-container" style="display: none;">
        <!-- –°–∞–π–¥–±–∞—Ä -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <span class="sidebar-logo-icon">üí¨</span>
                <h3>–ß–∞—Ç—ã</h3>
            </div>
            
            <div class="user-search-section">
                <input type="text" id="user-search-input" placeholder="–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..." oninput="searchUsers()">
                <ul id="search-results-list" class="search-results-list">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </ul>
            </div>
            
            <ul class="chat-list">
                <li id="general-chat-tab" class="chat-list-item active" onclick="switchChat('general')">
                    <i class="fas fa-comments"></i> –û–±—â–∏–π —á–∞—Ç
                </li>
                <li id="favorites-chat-tab" class="chat-list-item" onclick="switchChat('favorites')">
                    <i class="fas fa-star"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ - <span id="favorites-username"></span>
                </li>
            </ul>
            
            <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é —Ç–µ–ø–µ—Ä—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å–∞–π–¥–±–∞—Ä -->
            <!-- –í —Å–∞–π–¥–±–∞—Ä–µ, –ø–æ—Å–ª–µ chat-list -->
<div class="sidebar-menu">
    <div class="account-lobby">
        <div class="user-info-mini">
            <div class="avatar-small-wrapper">
                <img id="lobby-avatar-preview" src="" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-preview-image-small hidden">
                <div id="lobby-default-avatar-preview" class="default-avatar-preview-small"></div>
                <span id="lobby-status-indicator" class="status-indicator online"></span>
            </div>
            <span id="lobby-username" class="lobby-username-text">Username</span>
        </div>
        <button id="status-toggle-button" class="status-button" onclick="toggleUserStatus()">
            <i class="fas fa-circle"></i> <span id="current-status-text">–í —Å–µ—Ç–∏</span>
        </button>
    </div>
    
				    <div class="menu-buttons">
        <button class="menu-btn" onclick="toggleTheme()">
            <i class="fas fa-moon theme-icon"></i> –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É
        </button>
        <button class="menu-btn" onclick="showSettings()">
            <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
        <button class="menu-btn logout-button" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
        </button>
    </div>
</div>
        </div>
        
        <div id="main-content" class="main-content">
            <!-- –®–∞–ø–∫–∞ -->
            <div class="header">
                <div class="header-title">
                    <span class="header-icon">üí¨</span>
                    <h2 id="current-chat-title">–û–±—â–∏–π —á–∞—Ç</h2>
                </div>
                
                <div class="header-actions">
                    <!-- –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ —Å–∞–π–¥–±–∞—Ä, –∑–¥–µ—Å—å –ø—É—Å—Ç–æ -->
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ -->
            <div class="chat-container">
                <div id="messages" class="messages">
                    <div class="welcome-message">
                        <div class="welcome-icon">üëã</div>
                        <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h3>
                        <p>–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∏–≤ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
                    </div>
                </div>
                
                <!-- –û–∫–Ω–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–≤–µ—Ç–∞ -->
                <div id="reply-preview-container" class="reply-preview-container hidden">
                    <div class="reply-info">
                        <span class="reply-label">–û—Ç–≤–µ—Ç –Ω–∞:</span>
                        <span id="reply-username" class="reply-username"></span>
                        <p id="reply-text" class="reply-text"></p>
                    </div>
                    <button id="clear-reply-button" class="clear-reply-button" title="–û—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç" type="button">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                <div class="message-input">
                    <div class="message-input-container">
                        <button class="emoji-button" onclick="toggleEmojiPicker()" title="–≠–º–æ–¥–∑–∏" type="button">
                            <i class="fas fa-grin"></i>
                        </button>
                        <div class="input-wrapper">
                            <input type="text" id="message-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleKeyPress(event)">
                            <div class="input-border"></div>
                        </div>
                        <button class="send-button" onclick="sendMessage()" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ" type="button">
                            <span class="send-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                            <span class="send-icon"><i class="fas fa-paper-plane"></i></span>
                        </button>
                    </div>
                    
                    <!-- Picker —ç–º–æ–¥–∑–∏ -->
                    <div id="emoji-picker" class="emoji-picker hidden">
                        <div class="emoji-picker-header">
                            <h4>–í—ã–±–µ—Ä–∏—Ç–µ —ç–º–æ–¥–∑–∏</h4>
                            <button class="emoji-close" onclick="hideEmojiPicker()" type="button">√ó</button>
                        </div>
                        <div class="emoji-grid" id="emoji-grid">
                            <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
<div id="settings-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <button class="modal-close" onclick="hideSettings()" title="–ó–∞–∫—Ä—ã—Ç—å" type="button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="tab-navigation">
            <button class="tab-button active" onclick="showSettingsTab('messenger')" type="button">–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</button>
            <button class="tab-button" onclick="showSettingsTab('profile')" type="button">–ü—Ä–æ—Ñ–∏–ª—å</button>
        </div>

        <!-- –û–ë–õ–ê–°–¢–¨ –° –ü–†–û–ö–†–£–¢–ö–û–ô -->
        <div class="modal-body-scroll-area">
            <div class="tab-content active" id="messenger-tab-content">
                <div class="settings-section">
                    <h4>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h4>
                    <div class="settings-option">
                        <label for="theme-select">–¶–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞:</label>
                        <select id="theme-select" onchange="changeTheme()">
                            <option value="light">üåû –°–≤–µ—Ç–ª–∞—è</option>
                            <option value="dark">üåô –¢—ë–º–Ω–∞—è</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="profile-tab-content">
                <div class="settings-section">
                    <h4><i class="fas fa-user-cog"></i> –ê–∫–∫–∞—É–Ω—Ç</h4>
                    <div class="user-info">
                        <span class="user-icon"><i class="fas fa-user-circle"></i></span>
                        <span id="current-username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                    </div>
                    
                    <!-- –°–ï–ö–¶–ò–Ø –ê–í–ê–¢–ê–†–ê -->
                    <div class="settings-option avatar-upload-section">
                        <label>–í–∞—à –∞–≤–∞—Ç–∞—Ä:</label>
                        <div class="avatar-preview-container">
                            <img id="avatar-preview" src="" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-preview-image hidden">
                            <div id="default-avatar-preview" class="default-avatar-preview"></div>
                        </div>
                        <input type="file" id="avatar-input" accept="image/*" onchange="handleAvatarChange(event)">
                        <button class="sidebar-button menu-btn" onclick="saveAvatar()" type="button">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
                        </button>
                    </div>
                    
                    <!-- –°–ï–ö–¶–ò–Ø "–û –°–ï–ë–ï" -->
                    <div class="settings-option">
                        <label for="about-me-input">–û —Å–µ–±–µ:</label>
                        <textarea id="about-me-input" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."></textarea>
                        <button class="sidebar-button menu-btn" onclick="saveProfileDescription()" type="button">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- –°–ï–ö–¶–ò–Ø "–û –ü–†–ò–õ–û–ñ–ï–ù–ò–ò" -->
            <div class="settings-section">
                <h4>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h4>
                <p class="app-version">Nova Messenger Alpha</p>
                <p class="app-description">–ê–ª—å—Ñ–∞ –≤–µ—Ä—Å–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞</p>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="close-button" onclick="hideSettings()" type="button">
                <span class="button-icon"><i class="fas fa-check"></i></span>
                –ó–∞–∫—Ä—ã—Ç—å
            </button>
        </div>
    </div>
</div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="profile-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="profile-modal-username">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <button class="modal-close" onclick="hideProfileModal()" title="–ó–∞–∫—Ä—ã—Ç—å" type="button"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body-scroll-area">
                    <div class="profile-info-section">
                        <div class="avatar-preview-container profile-avatar-large">
                            <img id="profile-modal-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-preview-image">
                            <div id="profile-modal-default-avatar" class="default-avatar-preview"></div>
                        </div>
                        <p id="profile-modal-about-me" class="about-me-text">–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="close-button" onclick="hideProfileModal()" type="button">
                        <span class="button-icon"><i class="fas fa-check"></i></span>
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
        <div id="image-preview-modal" class="modal">
            <div class="modal-content">
                <img id="image-preview-src" src="" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" class="modal-image-preview">
            </div>
        </div>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notification" class="notification hidden">
            <span id="notification-text"></span>
        </div>
        
        <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é -->
        <div id="context-menu" class="context-menu hidden">
            <div class="context-menu-item" onclick="replyToMessage()">
                <i class="fas fa-reply"></i> –û—Ç–≤–µ—Ç–∏—Ç—å
            </div>
            <div class="context-menu-item" onclick="addToFavorites()">
                <i class="fas fa-star"></i> –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            </div>
            <div class="context-menu-item edit-option" onclick="editMessage()">
                <i class="fas fa-edit"></i> –ò–∑–º–µ–Ω–∏—Ç—å
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>
